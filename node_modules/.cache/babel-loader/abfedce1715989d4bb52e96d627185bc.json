{"ast":null,"code":"var _jsxFileName = \"/Users/tienichii/Downloads/WebMovie/src/components/MovieDetail/MovieDetail.js\";\nimport React, { useState } from 'react';\nimport ReactDom from 'react-dom';\nimport './MovieDetail.scss';\nimport tmdbApi from '../../api/tmdbApi';\nimport apiConfig from '../../api/apiConfig';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { popupActions, popupSelector } from '../../store/popup';\nconst MovieDetail = () => {\n  const isOpen = useSelector(popupSelector.isOpen);\n  const movie = useSelector(popupSelector.movie);\n  const dispatch = useDispatch();\n  const [trailerKey, setTrailerKey] = useState(null);\n  const [error, setError] = useState(false);\n  if (!isOpen) return null;\n\n  // call API\n  async function fetchVideo(id) {\n    try {\n      const response = await tmdbApi.getVideo(id);\n      if (response.results.length) {\n        const trailer = response.results.find(item => item.type === 'Trailer');\n        const teaser = response.results.find(item => item.type === 'Teaser');\n        // uu tien hien thi trailer hon\n        setTrailerKey(trailer ? trailer === null || trailer === void 0 ? void 0 : trailer.key : teaser === null || teaser === void 0 ? void 0 : teaser.key);\n      }\n    } catch (error) {\n      throw new Error(error);\n      setError(error.message);\n    }\n  }\n  fetchVideo(movie.id);\n  console.log(error);\n  // check video to render trailer or backdrop\n  let video;\n  console.log(movie);\n  if (trailerKey) {\n    video = /*#__PURE__*/React.createElement(\"iframe\", {\n      src: `https://www.youtube.com/embed/${trailerKey}`,\n      width: \"100%\",\n      height: \"100%\",\n      title: `nmj`,\n      className: \"detail-video\",\n      allow: \"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 39,\n        columnNumber: 7\n      }\n    });\n  } else {\n    video = /*#__PURE__*/React.createElement(\"img\", {\n      src: `${apiConfig.originalImage((movie === null || movie === void 0 ? void 0 : movie.backdrop_path) || (movie === null || movie === void 0 ? void 0 : movie.poster_path))}`,\n      alt: (movie === null || movie === void 0 ? void 0 : movie.name) || (movie === null || movie === void 0 ? void 0 : movie.title) || '',\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 7\n      }\n    });\n  }\n  const handleClose = () => {\n    dispatch(popupActions.CLOSE_POPUP());\n  };\n  return ReactDom.createPortal( /*#__PURE__*/React.createElement(\"div\", {\n    id: \"detail\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"overplay\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"detailMovie\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"detail-text\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"close\",\n    onClick: handleClose,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 11\n    }\n  }, \"X\"), /*#__PURE__*/React.createElement(\"h2\", {\n    className: \"detail-text__title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 11\n    }\n  }, (movie === null || movie === void 0 ? void 0 : movie.name) || (movie === null || movie === void 0 ? void 0 : movie.title)), /*#__PURE__*/React.createElement(\"hr\", {\n    className: \"mb-1 mt-1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"large\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 13\n    }\n  }, \"Release Date:\", (movie === null || movie === void 0 ? void 0 : movie.release_date) || (movie === null || movie === void 0 ? void 0 : movie.first_air_date))), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"large\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 13\n    }\n  }, \"Vote: \", movie === null || movie === void 0 ? void 0 : movie.vote_average, \"/10\")), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"mt-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 11\n    }\n  }, movie === null || movie === void 0 ? void 0 : movie.overview)), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"detail-video\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 9\n    }\n  }, video))), document.getElementById('popup'));\n};\nexport default MovieDetail;","map":{"version":3,"names":["React","useState","ReactDom","tmdbApi","apiConfig","useDispatch","useSelector","popupActions","popupSelector","MovieDetail","isOpen","movie","dispatch","trailerKey","setTrailerKey","error","setError","fetchVideo","id","response","getVideo","results","length","trailer","find","item","type","teaser","key","Error","message","console","log","video","createElement","src","width","height","title","className","allow","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","originalImage","backdrop_path","poster_path","alt","name","handleClose","CLOSE_POPUP","createPortal","onClick","release_date","first_air_date","vote_average","overview","document","getElementById"],"sources":["/Users/tienichii/Downloads/WebMovie/src/components/MovieDetail/MovieDetail.js"],"sourcesContent":["import React, { useState } from 'react';\nimport ReactDom from 'react-dom';\nimport './MovieDetail.scss';\nimport tmdbApi from '../../api/tmdbApi';\nimport apiConfig from '../../api/apiConfig';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { popupActions, popupSelector } from '../../store/popup';\n\nconst MovieDetail = () => {\n  const isOpen = useSelector(popupSelector.isOpen);\n  const movie = useSelector(popupSelector.movie);\n  const dispatch = useDispatch();\n  const [trailerKey, setTrailerKey] = useState(null);\n  const [error, setError] = useState(false);\n  if (!isOpen) return null;\n\n  // call API\n  async function fetchVideo(id) {\n    try {\n      const response = await tmdbApi.getVideo(id);\n      if (response.results.length) {\n        const trailer = response.results.find(item => item.type === 'Trailer');\n        const teaser = response.results.find(item => item.type === 'Teaser');\n        // uu tien hien thi trailer hon\n        setTrailerKey(trailer ? trailer?.key : teaser?.key);\n      }\n    } catch (error) {\n      throw new Error(error);\n      setError(error.message);\n    }\n  }\n  fetchVideo(movie.id);\n  console.log(error);\n  // check video to render trailer or backdrop\n  let video;\n  console.log(movie);\n  if (trailerKey) {\n    video = (\n      <iframe\n        src={`https://www.youtube.com/embed/${trailerKey}`}\n        width='100%'\n        height='100%'\n        title={`nmj`}\n        className='detail-video'\n        allow='accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share'\n      ></iframe>\n    );\n  } else {\n    video = (\n      <img\n        src={`${apiConfig.originalImage(\n          movie?.backdrop_path || movie?.poster_path\n        )}`}\n        alt={movie?.name || movie?.title || ''}\n      />\n    );\n  }\n  const handleClose = () => {\n    dispatch(popupActions.CLOSE_POPUP());\n  };\n  return ReactDom.createPortal(\n    <div id='detail'>\n      <div className='overplay'></div>\n      <div className='detailMovie'>\n        <div className='detail-text'>\n          <div className='close' onClick={handleClose}>\n            X\n          </div>\n          <h2 className='detail-text__title'>{movie?.name || movie?.title}</h2>\n          <hr className='mb-1 mt-1'></hr>\n          <p className='large'>\n            <strong>\n              Release Date:\n              {movie?.release_date || movie?.first_air_date}\n            </strong>\n          </p>\n          <p className='large'>\n            <strong>Vote: {movie?.vote_average}/10</strong>\n          </p>\n          <p className='mt-2'>{movie?.overview}</p>\n        </div>\n        <div className='detail-video'>{video}</div>\n      </div>\n    </div>,\n    document.getElementById('popup')\n  );\n};\n\nexport default MovieDetail;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}